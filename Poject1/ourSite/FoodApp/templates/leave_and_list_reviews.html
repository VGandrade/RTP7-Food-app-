<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leave a Review & Read Reviews</title>
</head>
<body>
    <h1>Leave a Review Here!</h1>
    <form method="post">
        {% csrf_token %}
        <label for="restaurant">Restaurant:</label>
        {{ form.restaurant }}
        <br>
        <label for="review">Review:</label>
        {{ form.review }}
        <br>
        <button type="submit">Submit Review</button>
    </form>

    <hr>

    <h2>Read Some Reviews!</h2>
    <form method="get">
        <label for="restaurant_filter">Select a restaurant:</label>
        <select name="restaurant_filter">
            <option value="">Select a Restaurant</option>
            {% for restaurant in restaurants %}
                <option value="{{ restaurant.name }}">{{ restaurant.name }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filter Reviews</button>
    </form>

    <br>

    {% if reviews %}
        <h3>Reviews for {{ restaurant_name }}:</h3>
        {% for review in reviews %}
            <div>
                <strong>Reviewer:</strong> {{ review.user.username }}<br>
                <strong>Restaurant:</strong> {{ review.restaurant.name }}<br>
                <strong>Review:</strong> {{ review.content }}<br>
                <hr>
            </div>
        {% endfor %}
    {% else %}
        <p>No reviews available for the selected restaurant.</p>
    {% endif %}
</body>
</html>
